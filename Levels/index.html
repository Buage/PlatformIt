<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Levels</title>
  <style>
    .level-card {
      border: 1px solid #ccc;
      padding: 20px;
      margin: 10px;
      width: 300px;
      height: 350px;
      display: none;
    }
    .active {
      display: block;
    }
    .level-image {
      max-width: 100%;
      height: auto;
    }
  </style>
</head>
<body>
  <div class="level-container"></div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const levelContainer = document.querySelector('.level-container');

      fetch('https://platformitdb.000webhostapp.com/')
        .then(response => response.json())
        .then(data => {
          Object.keys(data).forEach((levelName, index) => {
            const level = data[levelName];

            const levelCard = document.createElement('div');
            levelCard.classList.add('level-card');
            if (index === 0) {
              levelCard.classList.add('active');
            }

            const levelTitle = document.createElement('h2');
            levelTitle.textContent = level.name;

            const levelDescription = document.createElement('p');
            levelDescription.textContent = `Author: ${level.author}\nDownloads: ${level.downloads}\nDifficulty: ${level.difficulty}`;

            // Play button for each level
            const playButton = document.createElement('button');
            playButton.textContent = 'Play';
            playButton.addEventListener('click', function() {
              window.location.href = `Levels/Play/${level.name}.html`;
            });

            levelCard.appendChild(levelTitle);
            levelCard.appendChild(levelDescription);
            levelCard.appendChild(playButton);

            levelContainer.appendChild(levelCard);
          });

          document.addEventListener('keydown', function(event) {
            const levels = document.querySelectorAll('.level-card');
            let currentLevel = [...levels].findIndex(level => level.classList.contains('active'));

            if (event.key === 'ArrowRight') {
              currentLevel = (currentLevel + 1) % levels.length;
              showLevel(levels, currentLevel);
            } else if (event.key === 'ArrowLeft') {
              currentLevel = (currentLevel - 1 + levels.length) % levels.length;
              showLevel(levels, currentLevel);
            }
          });
        })
        .catch(error => {
          console.error('Error fetching levels:', error);
        });

      function showLevel(levels, index) {
        levels.forEach((level, idx) => {
          if (idx === index) {
            level.classList.add('active');
          } else {
            level.classList.remove('active');
          }
        });
      }
    });
  </script>
</body>
</html>
