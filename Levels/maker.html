<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Level Maker with Toolbox</title>
  <style>

    .character {
      position: absolute;
      left: 50px; /* Set initial X position */
      top: 0px; /* Set initial Y position to -20 */
      width: 50px;
      height: 50px;
      background-color: red;
      border-radius: 10px; /* Rounded corners */
    }
    
    body {
      margin: 0;
      display: flex;
      height: 100vh;
    }

    .toolbox {
      width: 100px; /* Set width for the toolbox */
      background-color: #f0f0f0; /* Toolbox background color */
      border-right: 1px solid #ccc; /* Border on the right for separation */
    }

    .toolbox-item {
      padding: 10px;
      margin-bottom: 5px;
      cursor: pointer;
      transition: transform 0.2s; /* Smooth transition for scaling and positioning */
    }

    .toolbox-item img {
      width: 32px; /* Set width of icons */
      height: 32px; /* Set height of icons */
    }

    .toolbox-item.selected {
      transform: scale(1.2) translateX(3px); /* Scale up and move slightly to the right */
    }

    .main-content {
      flex: 1;
      position: relative; /* Position relative for absolute positioning of new items */
      background-color: #fff; /* Example background color */
    }
  </style>
</head>
<body>
  <div class="toolbox">
    <!-- Tool 1: Block -->
    <div class="toolbox-item" onclick="selectTool(this)">
      <img src="Resources/block.png" alt="Block">
    </div>

    <!-- Tool 2: Spike -->
    <div class="toolbox-item" onclick="selectTool(this)">
      <img src="Resources/spike.png" alt="Spike">
    </div>
    
    <!-- Add more toolbox items with icons as needed -->
  </div>
  
  <div class="main-content" onclick="placeSelectedItem(event)">
    <!-- Main content area (grid or other content) -->
    <!-- Your level maker content goes here -->
    <button onclick="spawnCharacter()">Test</button> <!-- Test button -->
  </div>

  <script>
    let selectedTool = null;

    function selectTool(tool) {
      // Remove 'selected' class from all toolbox items
      const toolboxItems = document.querySelectorAll('.toolbox-item');
      toolboxItems.forEach(item => item.classList.remove('selected'));

      // Add 'selected' class to the clicked toolbox item
      tool.classList.add('selected');
      selectedTool = tool.querySelector('img').cloneNode(); // Keep a reference to the selected tool icon
    }

    function placeSelectedItem(event) {
      if (selectedTool) {
        const newItem = selectedTool.cloneNode(); // Create a new item using the selected tool icon
        newItem.style.position = 'absolute'; // Set position absolute for precise placement

        // Position the item 130 pixels to the left and 30 pixels above the mouse pointer's position
        newItem.style.left = `${event.clientX - 130}px`; // Adjusted horizontal position
        newItem.style.top = `${event.clientY - 30}px`; // Adjusted vertical position
        newItem.style.width = '50px'; // Set the width of the placed object
        newItem.style.height = '50px'; // Set the height of the placed object

        document.querySelector('.main-content').appendChild(newItem); // Append the new item to the main content
      }
    }

    function spawnCharacter() {
      const character = document.createElement('div');
      character.classList.add('character'); // Add character class for styling
      document.querySelector('.main-content').appendChild(character);

      let characterY = 50; // Initial Y position
      let characterX = 50; // Initial X position
      let isJumping = false; // Flag to control jumping
      const gravity = 0.5; // Gravity value
      const jumpForce = 10; // Jump force value

      // Apply gravity immediately after spawning
      const gravityInterval = setInterval(() => {
        if (characterY < 50) {
          characterY += gravity; // Apply gravity
          character.style.top = `${characterY}px`; // Update character's top position
        }
      }, 20);

      // Enable controls after 4 seconds
      setTimeout(() => {
        clearInterval(gravityInterval); // Stop gravity after 4 seconds
        let enableControls = true; // Flag to enable controls

        document.addEventListener('keydown', (event) => {
          if (enableControls) {
            if (event.code === 'ArrowLeft') {
              characterX -= 5; // Move left
            } else if (event.code === 'ArrowRight') {
              characterX += 5; // Move right
            } else if (event.code === 'Space' && !isJumping) {
              isJumping = true; // Set jumping flag to true
              let jumpStep = 0;

              const jumpInterval = setInterval(() => {
                jumpStep += jumpForce - gravity; // Calculate jump force
                characterY -= jumpStep; // Apply jump force
                character.style.top = `${characterY}px`; // Update character's top position

                if (characterY >= 50) {
                  characterY = 50; // Reset Y position when landed
                  character.style.top = `${characterY}px`;
                  isJumping = false; // Reset jumping flag
                  clearInterval(jumpInterval); // Stop jumping when landed
                }
              }, 20);
            }

            // Update character's position
            character.style.left = `${characterX}px`;
          }
        });
      }, 4000); // Wait for 4 seconds before enabling controls
    }
  </script>
</body>
</html>
